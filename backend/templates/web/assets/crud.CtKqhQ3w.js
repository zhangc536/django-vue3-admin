import{r as s}from"./index.WrgjqPzT.js";import"./vue.UJNVWY_g.js";const o="/api/system/finance/";function c(a){return s({url:o,method:"get",params:a})}function m(a){return s({url:o,method:"post",data:a})}function f(a){return s({url:o+a.id+"/",method:"put",data:a})}function g(a){return s({url:o+a+"/",method:"delete",data:{id:a}})}const D=function({crudExpose:a}){const d=t=>t.toLocaleDateString("en-CA"),l=t=>{const e=new Date;if(t==="day"){const r=new Date(e.getFullYear(),e.getMonth(),e.getDate());return d(r)}if(t==="month"){const r=new Date(e.getFullYear(),e.getMonth(),1),i=new Date(e.getFullYear(),e.getMonth()+1,0);return[d(r),d(i)]}if(t==="year"){const r=new Date(e.getFullYear(),0,1),i=new Date(e.getFullYear(),11,31);return[d(r),d(i)]}return[]};return{crudOptions:{request:{pageRequest:async t=>{var u;const e=t||{},r=((u=a==null?void 0:a.getSearchFormData)==null?void 0:u.call(a))??{},i=r.form??r??{},n={...e.form||{},...i||{}};return e.time_quick&&(e.date=l(e.time_quick),delete e.time_quick),n.time_quick&&(e.date=l(n.time_quick),delete n.time_quick),!e.start_date&&Array.isArray(e.date)&&e.date.length===2?(e.start_date=e.date[0],e.end_date=e.date[1],delete e.date):!e.start_date&&typeof e.date=="string"&&e.date?(e.start_date=e.date,e.end_date=e.date,delete e.date):!e.start_date&&Array.isArray(n.date)&&n.date.length===2?(e.start_date=n.date[0],e.end_date=n.date[1],delete n.date):!e.start_date&&typeof n.date=="string"&&n.date&&(e.start_date=n.date,e.end_date=n.date,delete n.date),e.start_date&&(n.start_date=e.start_date),e.end_date&&(n.end_date=e.end_date),e.form=n,await c(e)},addRequest:async({form:t})=>(t.date||(t.date=new Date().toLocaleDateString("en-CA")),await m(t)),editRequest:async({form:t,row:e})=>(t.id=e.id,await f(t)),delRequest:async({row:t})=>await g(t.id)},rowHandle:{fixed:"right",width:120,buttons:{view:{show:!1},edit:{type:"text"},remove:{type:"text"},custom:{show:!1}}},columns:{_index:{title:"序号",form:{show:!1},column:{align:"center",width:"70px",columnSetDisabled:!0,formatter:t=>{let e=t.index??1,r=a.crudBinding.value.pagination;return((r.currentPage??1)-1)*r.pageSize+e+1}}},customer_name:{title:"客户姓名",type:"input",search:{show:!0,component:{props:{clearable:!0,placeholder:"请输入客户姓名"}}},column:{minWidth:160}},amount:{title:"成本金额",type:"number",form:{component:{props:{min:0,step:.01}}},column:{minWidth:120}},income:{title:"金额",type:"number",form:{show:!1},column:{minWidth:120}},reminder_datetime:{form:{show:!1},column:{show:!1}},is_reminded:{form:{show:!1},column:{show:!1}}}}}};export{D as createCrudOptions};
