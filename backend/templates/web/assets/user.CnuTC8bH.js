const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/userNews.CKaSlo-j.js","assets/vue.UJNVWY_g.js","assets/index.WrgjqPzT.js","assets/index.DDQIcbhy.css","assets/_plugin-vue_export-helper.DlAUqK2U.js","assets/userNews.BRMP0g6z.css","assets/search.nEWuSS5b.js","assets/search.m-zLAaZ_.css"])))=>i.map(i=>d[i]);
import{W as ne,Y as se,u as te,L as C,S as $,g as oe,a9 as le,_ as P,b as ae,o as re,E as ie,M as ue}from"./index.WrgjqPzT.js";import{B as ce,d as A,R as de,M as T,h as L,g as me,c as fe,j as ge,O as be,k as g,a as _e,o as he,l as n,e as u,w as s,q as m,s as w,f as R,u as h,P as q,n as pe}from"./vue.UJNVWY_g.js";import{_ as we}from"./_plugin-vue_export-helper.DlAUqK2U.js";const x=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],b=(()=>{if(typeof document>"u")return!1;const t=x[0],i={};for(const a of x)if((a==null?void 0:a[1])in document){for(const[d,v]of a.entries())i[t[d]]=v;return i}return!1})(),U={change:b.fullscreenchange,error:b.fullscreenerror};let r={request(t=document.documentElement,i){return new Promise((a,p)=>{const d=()=>{r.off("change",d),a()};r.on("change",d);const v=t[b.requestFullscreen](i);v instanceof Promise&&v.then(d).catch(p)})},exit(){return new Promise((t,i)=>{if(!r.isFullscreen){t();return}const a=()=>{r.off("change",a),t()};r.on("change",a);const p=document[b.exitFullscreen]();p instanceof Promise&&p.then(a).catch(i)})},toggle(t,i){return r.isFullscreen?r.exit():r.request(t,i)},onchange(t){r.on("change",t)},onerror(t){r.on("error",t)},on(t,i){const a=U[t];a&&document.addEventListener(a,i,!1)},off(t,i){const a=U[t];a&&document.removeEventListener(a,i,!1)},raw:b};Object.defineProperties(r,{isFullscreen:{get:()=>!!document[b.fullscreenElement]},element:{enumerable:!0,get:()=>document[b.fullscreenElement]??void 0},isEnabled:{enumerable:!0,get:()=>!!document[b.fullscreenEnabled]}});b||(r={isEnabled:!1});const ve=ce("messageCenter",{state:()=>({unread:0}),actions:{async setUnread(t){this.unread=t}}}),Ce={class:"layout-navbars-breadcrumb-user-icon"},Se=["title"],Ee={class:"layout-navbars-breadcrumb-user-icon"},ke=["title"],Fe=["title"],ze={class:"layout-navbars-breadcrumb-user-icon"},ye=["title"],Ie={class:"layout-navbars-breadcrumb-user-link"},Be=["src"],Me=A({name:"layoutBreadcrumbUser"}),Oe=A({...Me,setup(t){const i=q(()=>P(()=>import("./userNews.CKaSlo-j.js"),__vite__mapDeps([0,1,2,3,4,5]))),a=q(()=>P(()=>import("./search.nEWuSS5b.js"),__vite__mapDeps([6,1,2,3,4,7]))),{locale:p,t:d}=ne.useI18n(),v=de(),N=se(),D=te(),{userInfos:k}=T(N),{themeConfig:S}=T(D),I=L(),c=me({isScreenfull:!1,disabledI18n:"zh-cn",disabledSize:"large"}),V=fe(()=>{let e="";const{layout:o,isClassicSplitMenu:l}=S.value;return["defaults","columns"].includes(o)||o==="classic"&&!l?e="1":e="",e}),j=()=>{if(!r.isEnabled)return ae.warning("暂不不支持全屏"),!1;r.toggle(),r.on("change",()=>{r.isFullscreen?c.isScreenfull=!0:c.isScreenfull=!1})},H=()=>{re.emit("openSetingsDrawer")},W=e=>{e==="logOut"?ie({closeOnClickModal:!1,closeOnPressEscape:!1,title:d("message.user.logOutTitle"),message:d("message.user.logOutMessage"),showCancelButton:!0,confirmButtonText:d("message.user.logOutConfirm"),cancelButtonText:d("message.user.logOutCancel"),buttonSize:"default",beforeClose:(o,l,f)=>{o==="confirm"?(l.confirmButtonLoading=!0,l.confirmButtonText=d("message.user.logOutExit"),setTimeout(()=>{f(),setTimeout(()=>{l.confirmButtonLoading=!1},300)},700)):f()}}).then(async()=>{$.clear(),window.location.reload()}).catch(()=>{}):e==="wareHouse"?window.open("https://gitee.com/huge-dream/django-vue3-admin"):v.push(e)},Y=()=>{I.value.openSearch()},G=e=>{C.remove("themeConfig"),S.value.globalComponentSize=e,C.set("themeConfig",S.value),E("globalComponentSize","disabledSize"),window.location.reload()},J=e=>{C.remove("themeConfig"),S.value.globalI18n=e,C.set("themeConfig",S.value),p.value=e,ue.useTitle(),E("globalI18n","disabledI18n")},E=(e,o)=>{const l=C.get("themeConfig"),f=l&&l[e]||"";c[o]=f};ge(()=>{C.get("themeConfig")&&(E("globalComponentSize","disabledSize"),E("globalI18n","disabledI18n")),K()}),be(()=>{_&&(_.close(),_=null)});const F=ve();let _=null;const B=$.get("token"),M=L(!1),K=()=>{if(!B)return;const e=oe(`api/sse/?token=${B}`);_||(_=new EventSource(e),_.onopen=function(){M.value||(M.value=!0)},_.onmessage=function(o){F.setUnread(+o.data)},_.onerror=function(){})};return(e,o)=>{const l=g("el-dropdown-item"),f=g("el-dropdown-menu"),z=g("el-dropdown"),Q=g("ele-Search"),y=g("el-icon"),X=g("ele-Bell"),O=g("el-badge"),Z=g("el-popover"),ee=g("ele-ArrowDown");return he(),_e("div",{class:"layout-navbars-breadcrumb-user pr15",style:pe({flex:V.value})},[n(z,{"show-timeout":70,"hide-timeout":50,trigger:"click",onCommand:G},{dropdown:s(()=>[n(f,null,{default:s(()=>[n(l,{command:"large",disabled:c.disabledSize==="large"},{default:s(()=>[m(w(e.$t("message.user.dropdownLarge")),1)]),_:1},8,["disabled"]),n(l,{command:"default",disabled:c.disabledSize==="default"},{default:s(()=>[m(w(e.$t("message.user.dropdownDefault")),1)]),_:1},8,["disabled"]),n(l,{command:"small",disabled:c.disabledSize==="small"},{default:s(()=>[m(w(e.$t("message.user.dropdownSmall")),1)]),_:1},8,["disabled"])]),_:1})]),default:s(()=>[u("div",Ce,[u("i",{class:"iconfont icon-ziti",title:e.$t("message.user.title0")},null,8,Se)])]),_:1}),n(z,{"show-timeout":70,"hide-timeout":50,trigger:"click",onCommand:J},{dropdown:s(()=>[n(f,null,{default:s(()=>[n(l,{command:"zh-cn",disabled:c.disabledI18n==="zh-cn"},{default:s(()=>[...o[0]||(o[0]=[m("简体中文",-1)])]),_:1},8,["disabled"]),n(l,{command:"en",disabled:c.disabledI18n==="en"},{default:s(()=>[...o[1]||(o[1]=[m("English",-1)])]),_:1},8,["disabled"]),n(l,{command:"zh-tw",disabled:c.disabledI18n==="zh-tw"},{default:s(()=>[...o[2]||(o[2]=[m("繁體中文",-1)])]),_:1},8,["disabled"])]),_:1})]),default:s(()=>[u("div",Ee,[u("i",{class:R(["iconfont",c.disabledI18n==="en"?"icon-fuhao-yingwen":"icon-fuhao-zhongwen"]),title:e.$t("message.user.title1")},null,10,ke)])]),_:1}),u("div",{class:"layout-navbars-breadcrumb-user-icon",onClick:Y},[n(y,{title:e.$t("message.user.title2")},{default:s(()=>[n(Q)]),_:1},8,["title"])]),u("div",{class:"layout-navbars-breadcrumb-user-icon",onClick:H},[u("i",{class:"icon-skin iconfont",title:e.$t("message.user.title3")},null,8,Fe)]),u("div",ze,[n(Z,{placement:"bottom",trigger:"hover",transition:"el-zoom-in-top",width:300,persistent:!1},{reference:s(()=>[n(O,{value:h(F).unread,hidden:h(F).unread===0},{default:s(()=>[n(y,{title:e.$t("message.user.title4")},{default:s(()=>[n(X)]),_:1},8,["title"])]),_:1},8,["value","hidden"])]),default:s(()=>[n(h(i))]),_:1})]),u("div",{class:"layout-navbars-breadcrumb-user-icon mr10",onClick:j},[u("i",{class:R(["iconfont",c.isScreenfull?"icon-tuichuquanping":"icon-fullscreen"]),title:c.isScreenfull?e.$t("message.user.title6"):e.$t("message.user.title5")},null,10,ye)]),o[4]||(o[4]=u("div",null,null,-1)),n(z,{"show-timeout":70,"hide-timeout":50,onCommand:W},{dropdown:s(()=>[n(f,null,{default:s(()=>[n(l,{command:"/home"},{default:s(()=>[m(w(e.$t("message.user.dropdown1")),1)]),_:1}),n(l,{command:"/personal"},{default:s(()=>[m(w(e.$t("message.user.dropdown2")),1)]),_:1}),n(l,{command:"/versionUpgradeLog"},{default:s(()=>[...o[3]||(o[3]=[m("更新日志",-1)])]),_:1}),n(l,{divided:"",command:"logOut"},{default:s(()=>[m(w(e.$t("message.user.dropdown5")),1)]),_:1})]),_:1})]),default:s(()=>[u("span",Ie,[n(O,{"is-dot":"",class:"item online-status"},{default:s(()=>[u("img",{src:h(k).avatar||h(le),class:"layout-navbars-breadcrumb-user-link-photo mr5"},null,8,Be)]),_:1}),m(" "+w(h(k).username===""?"common":h(k).username)+" ",1),n(y,{class:"el-icon--right"},{default:s(()=>[n(ee)]),_:1})])]),_:1}),n(h(a),{ref_key:"searchRef",ref:I},null,512)],4)}}}),Le=we(Oe,[["__scopeId","data-v-71761990"]]);export{Le as default};
