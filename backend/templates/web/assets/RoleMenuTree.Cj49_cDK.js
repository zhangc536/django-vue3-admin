import{R as h,a as p,s as R,b as k}from"./api.qJ_MyuVj.js";import{R as M}from"./RoleMenuTreeStores.DAYB4_Dj.js";import{R as _}from"./RoleMenuBtnStores.DvO30Us1.js";import{R as g,a as C}from"./RoleMenuFieldStores.Bj-5MnTj.js";import{X as y,b as S}from"./index.WrgjqPzT.js";import{d as I,h as c,j as v,k as b,b as T,o as w}from"./vue.UJNVWY_g.js";const j=I({__name:"RoleMenuTree",setup(B){const o=h(),d=M(),s=_(),l=g(),u=C(),a=c([]),r=c([]),i={children:"children",label:"name",value:"id"},m=(e,t)=>{R({roleId:o.roleId,menuId:e.id,isCheck:t}).then(n=>{S({message:n.msg,type:"success"})})},f=async e=>{if(e.is_catalog)s.setState([]),l.setState([]);else{d.setRoleMenuTree(e);const{data:t}=await k({roleId:o.roleId,menuId:e.id});s.setState(t.menu_btn),l.setState(t.menu_field)}u.$reset()};return v(async()=>{a.value=await p({roleId:o.roleId}),r.value=y.toTreeArray(a.value).filter(e=>e.isCheck).map(e=>e.id)}),(e,t)=>{const n=b("el-tree");return w(),T(n,{ref:"treeRef",data:a.value,props:i,"default-checked-keys":r.value,onCheckChange:m,onNodeClick:f,"node-key":"id","check-strictly":"","highlight-current":"","show-checkbox":"","default-expand-all":"","check-on-click-leaf":!1},null,8,["data","default-checked-keys"])}}});export{j as default};
