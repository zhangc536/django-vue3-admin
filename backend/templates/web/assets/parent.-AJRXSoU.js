const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/iframes.Vm8ytr0P.js","assets/vue.UJNVWY_g.js","assets/index.WrgjqPzT.js","assets/index.DDQIcbhy.css"])))=>i.map(i=>d[i]);
import{p as I,u as P,o as w,S as x,_ as B}from"./index.WrgjqPzT.js";import{d as g,Q as D,R as E,M as d,g as S,h as M,c as f,N as O,I as c,j as U,O as b,v as j,k as Q,a as q,o as v,l as r,w as h,S as _,b as V,m as z,U as F,A as R,r as G,D as y,u as H,P as J,V as W}from"./vue.UJNVWY_g.js";const X={class:"layout-parent"},Y=g({name:"layoutParentView"}),ae=g({...Y,setup(Z){const K=J(()=>B(()=>import("./iframes.Vm8ytr0P.js"),__vite__mapDeps([0,1,2,3]))),t=D(),A=E(),k=I(),N=P(),{keepAliveNames:i,cachedViews:n}=d(k),{themeConfig:u}=d(N),e=S({refreshRouterViewKey:"",iframeRefreshKey:"",keepAliveNameList:[],iframeList:[]}),m=M(!0);W("refreshView",function(){m.value=!1,c(()=>{m.value=!0})});const l=f(()=>u.value.animation),L=f(()=>(console.log(n.value),u.value.isTagsview?n.value:e.keepAliveNameList)),p=f(()=>t.meta.isIframe),T=async()=>{A.getRoutes().forEach(s=>{s.meta.isIframe&&(s.meta.isIframeOpen=!1,s.meta.loading=!0,e.iframeList.push({...s}))})};return O(()=>{e.keepAliveNameList=i.value,w.on("onTagsViewRefreshRouterView",s=>{e.keepAliveNameList=i.value.filter(a=>t.name!==a),e.refreshRouterViewKey="",e.iframeRefreshKey="",c(()=>{e.refreshRouterViewKey=s,e.iframeRefreshKey=s,e.keepAliveNameList=i.value})})}),U(()=>{T(),c(()=>{setTimeout(()=>{if(u.value.isCacheTagsView){let s=x.get("tagsViewList")||[];n.value=s.filter(a=>{var o;return(o=a.meta)==null?void 0:o.isKeepAlive}).map(a=>a.name)}},0)})}),b(()=>{w.off("onTagsViewRefreshRouterView",()=>{})}),j(()=>t.fullPath,()=>{e.refreshRouterViewKey=decodeURI(t.fullPath)},{immediate:!0}),(s,a)=>{const o=Q("router-view");return v(),q("div",X,[r(o,null,{default:h(({Component:C})=>[r(_,{name:l.value,mode:"out-in"},{default:h(()=>[m.value?(v(),V(F,{key:0,include:L.value},[R((v(),V(G(C),{key:e.refreshRouterViewKey,class:"w100"})),[[y,!p.value]])],1032,["include"])):z("",!0)]),_:2},1032,["name"])]),_:1}),r(_,{name:l.value,mode:"out-in"},{default:h(()=>[R(r(H(K),{class:"w100",refreshKey:e.iframeRefreshKey,name:l.value,list:e.iframeList},null,8,["refreshKey","name","list"]),[[y,p.value]])]),_:1},8,["name"])])}}});export{ae as default};
