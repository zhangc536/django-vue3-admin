import{d as x,r as s,G as v,F as a,q as b,E as l,s as c}from"./index.WrgjqPzT.js";import{d as i}from"./dictionary.BfwLo0Jv.js";import{a as o}from"./authFunction.BFEqkD6U.js";import{M as q,c as d}from"./vue.UJNVWY_g.js";import{M as R}from"./md5.DLPczxzP.js";const r="/api/system/user/";function _(t){return s({url:r,method:"get",params:t})}function D(t){return s({url:r,method:"post",data:t})}function m(t){return s({url:r+t.id+"/",method:"put",data:t})}function T(t){return s({url:r+t+"/",method:"delete",data:{id:t}})}function C(t){return x({url:r+"export_data/",params:t,method:"get"})}function M(t){return s({url:r+t+"/reset_to_default_password/",method:"put"})}const O=function({crudExpose:t}){const p=async e=>await _(e),h=async({form:e,row:n})=>(e.id=n.id,await m(e)),f=async({row:e})=>await T(e.id),w=async({form:e})=>await D(e),y=async e=>{await M(e.id),c("重置密码成功")},g=v(),{systemConfig:u}=q(g);return d(()=>u.value),{crudOptions:{table:{remove:{confirmMessage:"是否删除该用户？"}},request:{pageRequest:p,addRequest:w,editRequest:h,delRequest:f},form:{initialForm:{password:d(()=>u.value["base.default_password"])}},actionbar:{buttons:{add:{show:o("user:Create")},export:{text:"导出",title:"导出",show:o("user:Export"),click:e=>l.confirm("确定导出数据吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>C(e.row))}}},rowHandle:{fixed:"right",width:200,buttons:{view:{show:!1},edit:{iconRight:"Edit",type:"text",show:o("user:Update")},remove:{iconRight:"Delete",type:"text",show:o("user:Delete")},resetDefaultPwd:{text:"重置密码",type:"text",iconRight:"Setting",show:o("user:ResetDefaultPassword"),click:e=>l.confirm("确定重置为系统默认密码吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>y(e.row))}}},columns:{_index:{title:"序号",form:{show:!1},column:{type:"index",align:"center",width:"70px",columnSetDisabled:!0}},username:{title:"账号",search:{show:!0},type:"input",column:{minWidth:100},form:{rules:[{required:!0,message:"账号必填项"}],component:{placeholder:"请输入账号"}}},password:{title:"密码",type:"password",column:{show:!1},editForm:{show:!1},form:{rules:[{required:!0,message:"密码必填项"}],component:{span:12,showPassword:!0,placeholder:"请输入密码"}},valueResolve({form:e}){e.password&&(e.password=R.hashStr(e.password))}},name:{title:"姓名",search:{show:!0},type:"input",column:{minWidth:100},form:{rules:[{required:!0,message:"姓名必填项"}],component:{span:12,placeholder:"请输入姓名"}}},role:{title:"角色",search:{disabled:!0},type:"dict-select",dict:a({url:"/api/system/role/",value:"id",label:"name"}),column:{minWidth:200},form:{rules:[{required:!0,message:"必填项"}],component:{multiple:!0,filterable:!0,placeholder:"请选择角色"}}},gender:{title:"性别",type:"dict-select",dict:a({data:i("gender")}),form:{value:1,component:{span:12}},component:{props:{color:"auto"}}},user_type:{title:"用户类型",search:{show:!0},type:"dict-select",dict:a({data:i("user_type")}),column:{minWidth:100},form:{show:!1,value:0,component:{span:12}}},is_active:{title:"状态",search:{show:!0},type:"dict-radio",column:{component:{name:"fs-dict-switch",activeText:"",inactiveText:"",style:"--el-switch-on-color: var(--el-color-primary); --el-switch-off-color: #dcdfe6",onChange:b(e=>()=>{m(e.row).then(n=>{c(n.msg)})})}},dict:a({data:i("button_status_bool")})},avatar:{title:"头像",type:"avatar-uploader",align:"center",form:{show:!1},column:{minWidth:100}}}}}};export{O as createCrudOptions};
