import{X as M,E as V,z as N}from"./index.WrgjqPzT.js";import U from"./index.1usS970F.js";import{_ as E}from"./index.vue_vue_type_script_setup_true_lang.CK41di1R.js";import j from"./index.BvfUEDqO.js";import z from"./index.B1R8WLoA.js";import{G,D as X}from"./api.BrlENiTv.js";import{d as x,h as r,j as A,k as s,b as C,o as T,w as n,l as o,e as _,u,$ as I,m as K}from"./vue.UJNVWY_g.js";import{_ as L}from"./_plugin-vue_export-helper.DlAUqK2U.js";import"./index.es.DmevZXPX.js";import"./index.vue_vue_type_script_setup_true_name_svgIcon_lang.B-t1bxEh.js";import"./crud.SpuTavul.js";import"./authFunction.BFEqkD6U.js";import"./crud.BieI8pJH.js";import"./api.CJ81IMKp.js";const O={class:"menu-box menu-left-box"},P={style:{height:"72vh"}},$={style:{height:"72vh"}},q=x({name:"menuPages"}),H=x({...q,setup(J){let m=r([]),p=r([]),l=r(!1),i=r({}),h=r(null),D=r(null),b=r(null);const f=()=>{G({}).then(a=>{const t=a.data,e=M.toArrayTree(t,{parentKey:"parent",children:"children",strict:!0});m.value=e})},y=a=>{var t,e;(t=D.value)==null||t.handleRefreshTable(a),(e=b.value)==null||e.handleRefreshTable(a)},k=(a,t)=>{var e,c;if(a==="update"&&t){const d=((c=(e=h.value)==null?void 0:e.treeRef)==null?void 0:c.currentNode.parent.data)||{};p.value=[d],i.value=t}l.value=!0},v=a=>{a==="submit"&&f(),l.value=!1,i.value={}},R=(a,t)=>{V.confirm("您确认删除该菜单项吗?","温馨提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(async()=>{const e=await X(a);t(),(e==null?void 0:e.code)===2e3&&(N(e.msg),f())})};return A(()=>{f()}),(a,t)=>{const e=s("el-col"),c=s("el-tab-pane"),d=s("el-tabs"),g=s("el-row"),B=s("el-drawer"),F=s("fs-page");return T(),C(F,null,{default:n(()=>[o(g,{class:"menu-el-row"},{default:n(()=>[o(e,{span:6},{default:n(()=>[_("div",O,[o(U,{ref_key:"menuTreeRef",ref:h,treeData:u(m),onTreeClick:y,onUpdateDept:k,onDeleteDept:R},null,8,["treeData"])])]),_:1}),o(e,{span:18},{default:n(()=>[o(d,{type:"border-card"},{default:n(()=>[o(c,{label:"按钮权限配置"},{default:n(()=>[_("div",P,[o(E,{ref_key:"menuButtonRef",ref:D},null,512)])]),_:1}),o(c,{label:"列权限配置"},{default:n(()=>[_("div",$,[o(z,{ref_key:"menuFieldRef",ref:b},null,512)])]),_:1})]),_:1})]),_:1})]),_:1}),o(B,{modelValue:u(l),"onUpdate:modelValue":t[0]||(t[0]=w=>I(l)?l.value=w:l=w),title:"菜单配置",direction:"rtl",size:"500px","close-on-click-modal":!1,"before-close":v},{default:n(()=>[u(l)?(T(),C(j,{key:0,initFormData:u(i),cacheData:u(p),treeData:u(m),onDrawerClose:v},null,8,["initFormData","cacheData","treeData"])):K("",!0)]),_:1},8,["modelValue"])]),_:1})}}}),ce=L(H,[["__scopeId","data-v-29f7b6c6"]]);export{ce as default};
